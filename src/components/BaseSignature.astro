---
const { name, title, phone, email } = Astro.props;
---
  
<div
  id="signature-card"
  class="bg-rs-primary-50 rounded-xl shadow-lg p-4 flex flex-row flex-nowrap gap-[10px] items-center border border-rs-primary-200 w-fit max-w-full font-source-sans"
  style="min-width: 400px; width: fit-content;"
>
  <img
    data-field="logoUrl"
    src="/romega-logo.svg"
    alt="Romega Solutions Logo"
    class="object-contain rounded flex-shrink-0"
    style="width: 84px; height: 131px; min-width: 84px;"
  />
  
  <!-- Vertical Divider Line -->
  <div class="w-px h-[130px] bg-rs-primary-700 flex-shrink-0"></div>
  
  <div class="flex-1 flex flex-col gap-2" style="min-width: 250px; max-width: 600px;">
   <!-- Name and Title Section -->
    <div class="flex flex-col">
      <span
        data-field="name"
        class="font-merriweather font-bold text-rs-primary-700 leading-tight tracking-wide text-xl break-words"
        style="word-wrap: break-word; overflow-wrap: break-word; hyphens: auto;"
      >
        {name}
      </span>
      <span
        data-field="title"
        class="font-source-sans font-medium text-rs-accent-500 leading-[13px] uppercase tracking-normal text-[20px] break-words"
        style="line-height: 20px; letter-spacing: 0%; word-wrap: break-word; overflow-wrap: break-word; hyphens: auto;"
      >
        {title}
      </span>
    </div>
    
    <!-- Contact Information Section -->
    <div class="mt-2 flex flex-col gap-1 text-[12.5px]">
      <div class="flex items-center gap-2">
        <img
          src="/call.svg"
          alt="Call Icon"
          class="w-4 h-4 inline-block align-middle"
        />
        <span class="font-source-sans text-rs-neutral-700 font-light">WhatsApp (PH)</span>
        <span data-field="phone" class="font-source-sans font-medium text-rs-primary-700 break-words">{phone}</span>
      </div>
      
      <div class="flex items-center gap-2">
        <img
          src="/at.svg"
          alt="Email Icon"
          class="w-4 h-4 inline-block align-middle"
        />
        <span data-field="email" class="font-source-sans text-rs-primary-700 break-words">{email}</span>
      </div>
      
      <div class="flex items-center gap-2">
        <img
          src="/globe.svg"
          alt="Globe Icon"
          class="w-4 h-4 inline-block align-middle"
        />
        <span class="font-source-sans text-rs-primary-700 underline italic break-all">www.romega-solutions.com</span>
      </div>
      
      <div class="flex items-start gap-2">
        <img
          src="/address.svg"
          alt="Address Icon"
          class="w-4 h-4 inline-block align-middle"
        />
        <div class="flex flex-col">
          <span>
                      <span class="font-source-sans text-rs-neutral-700 font-light">HQ Address (US) </span> <span class="font-source-sans text-rs-primary-700 break-words">222 Pacific Coast</span>
          </span>
          <span class="font-source-sans text-rs-primary-700 break-words">Hwy. #10 in El Segundo, CA 90245</span>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Dynamic width adjustment based on content
  function adjustSignatureWidth() {
    const card = document.getElementById('signature-card');
    if (!card) return;

    const nameElement = card.querySelector('[data-field="name"]') as HTMLElement;
    const titleElement = card.querySelector('[data-field="title"]') as HTMLElement;
    const emailElement = card.querySelector('[data-field="email"]') as HTMLElement;
    const phoneElement = card.querySelector('[data-field="phone"]') as HTMLElement;

    if (!nameElement || !titleElement) return;

    // Calculate the longest content width
    const elements = [nameElement, titleElement, emailElement, phoneElement];
    let maxTextLength = 0;

    elements.forEach(el => {
      if (el) {
        const text = el.textContent || '';
        maxTextLength = Math.max(maxTextLength, text.length);
      }
    });

    // Adjust card width based on content length
    // Base width: 400px, add extra width for longer content
    let calculatedWidth = 400;

    if (maxTextLength > 30) {
      calculatedWidth = 450;
    }
    if (maxTextLength > 40) {
      calculatedWidth = 500;
    }
    if (maxTextLength > 50) {
      calculatedWidth = 550;
    }
    if (maxTextLength > 60) {
      calculatedWidth = 600;
    }
    if (maxTextLength > 70) {
      calculatedWidth = 650;
    }

    // Apply the calculated width
    card.style.minWidth = `${calculatedWidth}px`;
  }

  // Run on page load
  document.addEventListener('DOMContentLoaded', adjustSignatureWidth);

  // Re-adjust when content changes (for live preview)
  const observer = new MutationObserver(adjustSignatureWidth);
  const card = document.getElementById('signature-card');
  
  if (card) {
    observer.observe(card, {
      characterData: true,
      childList: true,
      subtree: true
    });
  }
</script>